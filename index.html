<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0"
    />
    <title>2026 æ–°å¹´å¿«ä¹ - çƒŸèŠ±ç¥ç¦</title>
    <script src="./js/jquery.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        min-height: 100vh;
        background: linear-gradient(
          to bottom,
          #0a0a1a 0%,
          #1a1a3a 50%,
          #2a1a2a 100%
        );
        overflow: hidden;
        font-family: "Microsoft YaHei", sans-serif;
      }
      #fireworks {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }
      #year-display {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 150px;
        font-weight: bold;
        color: transparent;
        background: linear-gradient(
          45deg,
          #ff6b6b,
          #ffd93d,
          #6bcb77,
          #4d96ff,
          #ff6b6b
        );
        background-size: 400% 400%;
        -webkit-background-clip: text;
        background-clip: text;
        animation: gradientShift 3s ease infinite;
        z-index: 2;
        pointer-events: none;
      }
      @keyframes gradientShift {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }
      #input-panel {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 100;
        display: flex;
        gap: 15px;
      }
      #wish-input {
        width: 300px;
        padding: 15px 25px;
        font-size: 18px;
        border: none;
        border-radius: 50px;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        color: #fff;
        outline: none;
      }
      #wish-input::placeholder {
        color: rgba(255, 255, 255, 0.5);
      }
      #send-btn {
        padding: 15px 35px;
        font-size: 18px;
        border: none;
        border-radius: 50px;
        background: linear-gradient(135deg, #ff6b6b, #ffd93d);
        color: #fff;
        cursor: pointer;
        font-weight: bold;
      }
      #send-btn:hover {
        transform: scale(1.05);
      }
      /* è§¦æ‘¸åé¦ˆ */
      #send-btn:active,
      .quick-btn:active,
      #sound-btn:active {
        transform: scale(0.95);
        opacity: 0.8;
      }
      #sound-btn {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        font-size: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
        cursor: pointer;
        z-index: 100;
      }
      #sound-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }
      .floating-wish {
        position: fixed;
        font-size: 32px;
        font-weight: bold;
        pointer-events: none;
        z-index: 50;
        animation: floatUp 4s ease-out forwards;
        white-space: nowrap;
      }
      @keyframes floatUp {
        0% {
          opacity: 0;
          transform: translateY(50px) scale(0.5);
        }
        20% {
          opacity: 1;
          transform: translateY(0) scale(1.2);
        }
        100% {
          opacity: 0;
          transform: translateY(-150px) scale(0.8);
        }
      }
      #quick-wishes {
        position: fixed;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
        max-width: 600px;
        z-index: 100;
      }
      .quick-btn {
        padding: 10px 20px;
        font-size: 14px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
        cursor: pointer;
        white-space: nowrap;
        min-width: 80px;
      }
      .quick-btn:hover {
        background: rgba(255, 255, 255, 0.25);
      }

      /* ç§»åŠ¨ç«¯é€‚é… */
      @media (max-width: 768px) {
        /* å¹´ä»½æ˜¾ç¤º */
        #year-display {
          font-size: 100px;
          top: 35%; /* ä¸Šç§»ä½ç½® */
        }
        /* æ¼‚æµ®æ–‡å­— */
        .floating-wish {
          font-size: 24px;
        }
        /* å¿«é€Ÿç¥ç¦æŒ‰é’®åŒºåŸŸ */
        #quick-wishes {
          bottom: 150px;
          max-width: 90%;
          gap: 8px;
          flex-direction: row;
          flex-wrap: wrap;
          justify-content: center;
          padding: 10px 0;
        }
        .quick-btn {
          padding: 8px 12px;
          font-size: 12px;
          white-space: nowrap;
          width: calc(25% - 8px);
          box-sizing: border-box;
          text-align: center;
        }
        /* è¾“å…¥æ¡†å’ŒæŒ‰é’® */
        #wish-input {
          width: 250px;
          padding: 12px 20px;
          font-size: 16px;
        }
        #send-btn {
          padding: 12px 30px;
          font-size: 16px;
        }
      }

      @media (max-width: 480px) {
        /* å¹´ä»½æ˜¾ç¤º */
        #year-display {
          font-size: 70px;
          top: 30%; /* åœ¨å°å±å¹•ä¸Šè¿›ä¸€æ­¥ä¸Šç§» */
        }
        /* æ¼‚æµ®æ–‡å­— */
        .floating-wish {
          font-size: 20px;
        }
        /* è¾“å…¥é¢æ¿ */
        #input-panel {
          flex-direction: column;
          align-items: center;
          width: 90%;
          gap: 10px;
        }
        /* è¾“å…¥æ¡†å’ŒæŒ‰é’® */
        #wish-input {
          width: 100%;
          padding: 15px 20px;
          font-size: 16px;
        }
        #send-btn {
          width: 100%;
          padding: 15px 25px;
          font-size: 16px;
        }
        /* å¿«é€Ÿç¥ç¦æŒ‰é’®åŒºåŸŸ */
        #quick-wishes {
          bottom: 200px;
          max-width: 90%;
          gap: 6px;
          flex-direction: row;
          flex-wrap: wrap;
          justify-content: center;
          padding: 10px 0;
        }
        .quick-btn {
          padding: 6px 8px;
          font-size: 11px;
          white-space: nowrap;
          width: calc(25% - 6px);
          box-sizing: border-box;
          text-align: center;
        }
      }
    </style>
  </head>
  <body>
    <canvas id="fireworks"></canvas>
    <div id="year-display">2026</div>
    <button id="sound-btn">ğŸ”Š éŸ³æ•ˆ</button>

    <div id="quick-wishes">
      <button class="quick-btn">ğŸ‰ æ–°å¹´å¿«ä¹</button>
      <button class="quick-btn">ğŸ§§ æ­å–œå‘è´¢</button>
      <button class="quick-btn">ğŸ’ª èº«ä½“å¥åº·</button>
      <button class="quick-btn">ğŸ“ˆ äº‹ä¸šæœ‰æˆ</button>
      <button class="quick-btn">ğŸ’• å¹¸ç¦ç¾æ»¡</button>
      <button class="quick-btn">ğŸŒŸ å¿ƒæƒ³äº‹æˆ</button>
      <button class="quick-btn">ğŸ é©¬å¹´å¤§å‰</button>
      <button class="quick-btn">ğŸ’° è´¢æºå¹¿è¿›</button>
    </div>

    <div id="input-panel">
      <input
        type="text"
        id="wish-input"
        placeholder="è¾“å…¥ä½ çš„æ–°å¹´ç¥ç¦..."
        maxlength="20"
      />
      <button id="send-btn">ğŸ† å‘å°„ç¥ç¦</button>
    </div>

    <script>
      $(function () {
        var canvas = document.getElementById("fireworks");
        var ctx = canvas.getContext("2d");
        var W, H;
        var particles = [];
        var rockets = [];
        // æ ¹æ®å±å¹•å¤§å°åŠ¨æ€è°ƒæ•´æœ€å¤§ç²’å­æ•°é‡
        var MAX_PARTICLES = window.innerWidth > 768 ? 800 : 400;

        // ========== éŸ³æ•ˆç³»ç»Ÿ ==========
        var audioCtx = null;
        var soundEnabled = true;

        function initAudio() {
          if (!audioCtx) {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
          }
          if (audioCtx.state === "suspended") {
            audioCtx.resume();
          }
        }

        // å‘å°„éŸ³æ•ˆ - å—–çš„ä¸Šå‡å£°
        function playLaunch() {
          if (!soundEnabled || !audioCtx) return;
          try {
            var osc = audioCtx.createOscillator();
            var gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            osc.type = "sine";
            osc.frequency.setValueAtTime(200, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(
              800,
              audioCtx.currentTime + 0.3
            );

            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(
              0.01,
              audioCtx.currentTime + 0.3
            );

            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.3);
          } catch (e) {}
        }

        // çˆ†ç‚¸éŸ³æ•ˆ - ç °çš„çˆ†ç‚¸å£°
        function playExplode() {
          if (!soundEnabled || !audioCtx) return;
          try {
            // å™ªéŸ³çˆ†ç‚¸
            var bufferSize = audioCtx.sampleRate * 0.2;
            var buffer = audioCtx.createBuffer(
              1,
              bufferSize,
              audioCtx.sampleRate
            );
            var data = buffer.getChannelData(0);
            for (var i = 0; i < bufferSize; i++) {
              data[i] =
                (Math.random() * 2 - 1) * Math.pow(1 - i / bufferSize, 2);
            }

            var noise = audioCtx.createBufferSource();
            noise.buffer = buffer;

            var noiseGain = audioCtx.createGain();
            noiseGain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            noiseGain.gain.exponentialRampToValueAtTime(
              0.01,
              audioCtx.currentTime + 0.2
            );

            var filter = audioCtx.createBiquadFilter();
            filter.type = "lowpass";
            filter.frequency.value = 1000;

            noise.connect(filter);
            filter.connect(noiseGain);
            noiseGain.connect(audioCtx.destination);
            noise.start();

            // ä½é¢‘è½°é¸£
            var osc = audioCtx.createOscillator();
            var oscGain = audioCtx.createGain();
            osc.connect(oscGain);
            oscGain.connect(audioCtx.destination);

            osc.type = "sine";
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(
              50,
              audioCtx.currentTime + 0.15
            );

            oscGain.gain.setValueAtTime(0.2, audioCtx.currentTime);
            oscGain.gain.exponentialRampToValueAtTime(
              0.01,
              audioCtx.currentTime + 0.15
            );

            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.15);
          } catch (e) {}
        }

        // ç‚¹å‡»é¡µé¢åˆå§‹åŒ–éŸ³é¢‘
        $(document).one("click touchstart", function () {
          initAudio();
        });

        function resize() {
          W = canvas.width = window.innerWidth;
          H = canvas.height = window.innerHeight;
          // æ ¹æ®å±å¹•å¤§å°åŠ¨æ€è°ƒæ•´æœ€å¤§ç²’å­æ•°é‡
          MAX_PARTICLES = W > 768 ? 800 : 400;
        }
        resize();
        $(window).resize(resize);

        // éšæœºé¢œè‰²
        function randColor() {
          var colors = [
            "#ff6b6b",
            "#ffd93d",
            "#6bcb77",
            "#4d96ff",
            "#ff9ff3",
            "#feca57",
            "#ff6348",
            "#1dd1a1",
            "#5f27cd",
            "#00d2d3",
            "#ff4757",
            "#2ed573",
          ];
          return colors[Math.floor(Math.random() * colors.length)];
        }

        // ç«ç®­
        function Rocket(x) {
          this.x = x || Math.random() * W;
          this.y = H;
          this.vx = (Math.random() - 0.5) * 3;
          this.vy = -10 - Math.random() * 5;
          this.targetY = 100 + Math.random() * H * 0.35;
          this.color = randColor();
          this.dead = false;
        }

        Rocket.prototype.update = function () {
          this.x += this.vx;
          this.y += this.vy;
          this.vy += 0.12;

          // æ·»åŠ è¾¹ç•Œæ£€æŸ¥ï¼Œç¡®ä¿ç«ç®­ä¸ä¼šè¶…å‡ºå±å¹•èŒƒå›´
          this.x = Math.max(0, Math.min(this.x, W));
          this.y = Math.max(0, Math.min(this.y, H));

          if (this.vy >= 0 || this.y <= this.targetY) {
            this.explode();
            this.dead = true;
          }
        };

        Rocket.prototype.draw = function () {
          ctx.beginPath();
          ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
          ctx.fillStyle = "#fff";
          ctx.shadowBlur = 15;
          ctx.shadowColor = this.color;
          ctx.fill();
          ctx.shadowBlur = 0;
        };

        Rocket.prototype.explode = function () {
          playExplode(); // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
          var count = 60 + Math.floor(Math.random() * 40);
          var hue = Math.random() * 360;
          for (var i = 0; i < count; i++) {
            if (particles.length >= MAX_PARTICLES) break;
            var angle = (i / count) * Math.PI * 2;
            var speed = 2 + Math.random() * 5;
            particles.push(
              new Particle(
                this.x,
                this.y,
                Math.cos(angle) * speed,
                Math.sin(angle) * speed,
                "hsl(" + ((hue + Math.random() * 50) % 360) + ",100%,60%)"
              )
            );
          }
        };

        // ç²’å­
        function Particle(x, y, vx, vy, color) {
          this.x = x;
          this.y = y;
          this.vx = vx;
          this.vy = vy;
          this.color = color;
          this.alpha = 1;
          this.decay = 0.015 + Math.random() * 0.015;
        }

        Particle.prototype.update = function () {
          this.vx *= 0.98;
          this.vy *= 0.98;
          this.vy += 0.04;
          this.x += this.vx;
          this.y += this.vy;
          this.alpha -= this.decay;

          // æ·»åŠ è¾¹ç•Œæ£€æŸ¥ï¼Œç¡®ä¿ç²’å­ä¸ä¼šè¶…å‡ºå±å¹•èŒƒå›´
          this.x = Math.max(0, Math.min(this.x, W));
          this.y = Math.max(0, Math.min(this.y, H));
        };

        Particle.prototype.draw = function () {
          ctx.globalAlpha = this.alpha;
          ctx.beginPath();
          ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
          ctx.globalAlpha = 1;
        };

        // å‘å°„çƒŸèŠ±
        function launch(x, silent) {
          rockets.push(new Rocket(x));
          if (!silent) playLaunch();
        }

        // ä¸»å¾ªç¯
        function loop() {
          // åŠé€æ˜è¦†ç›–äº§ç”Ÿæ‹–å°¾æ•ˆæœ
          ctx.fillStyle = "rgba(10, 10, 26, 0.15)";
          ctx.fillRect(0, 0, W, H);

          // æ›´æ–°å’Œç»˜åˆ¶ç«ç®­
          for (var i = rockets.length - 1; i >= 0; i--) {
            rockets[i].update();
            if (!rockets[i].dead) {
              rockets[i].draw();
            } else {
              rockets.splice(i, 1);
            }
          }

          // æ›´æ–°å’Œç»˜åˆ¶ç²’å­
          for (var j = particles.length - 1; j >= 0; j--) {
            particles[j].update();
            if (particles[j].alpha > 0) {
              particles[j].draw();
            } else {
              particles.splice(j, 1);
            }
          }

          requestAnimationFrame(loop);
        }
        loop();

        // ========== å…³é”®ï¼šå¤šä¸ªå®šæ—¶å™¨æŒç»­å‘å°„ ==========
        // å®šæ—¶å™¨1
        setInterval(function () {
          launch();
        }, 300);
        // å®šæ—¶å™¨2
        setInterval(function () {
          launch();
        }, 500);
        // å®šæ—¶å™¨3
        setInterval(function () {
          launch();
          launch();
        }, 700);
        // å®šæ—¶å™¨4 - ä¿åº•
        setInterval(function () {
          launch();
          launch();
        }, 400);

        // åˆå§‹å‘å°„
        for (var k = 0; k < 8; k++) {
          setTimeout(function () {
            launch();
          }, k * 150);
        }

        // ç‚¹å‡»å‘å°„
        $(canvas).click(function (e) {
          launch(e.clientX);
          launch(e.clientX + 50);
          launch(e.clientX - 50);
        });

        // è§¦æ‘¸å‘å°„ï¼ˆç§»åŠ¨ç«¯æ”¯æŒï¼‰
        $(canvas).on("touchstart", function (e) {
          e.preventDefault();
          var touch = e.touches[0];
          var x = touch.clientX;
          launch(x);
          launch(x + 50);
          launch(x - 50);
        });

        // ========== ç¥ç¦æ–‡å­—ç³»ç»Ÿ ==========
        var wishColors = [
          "#ff6b6b",
          "#ffd93d",
          "#6bcb77",
          "#4d96ff",
          "#ff9ff3",
          "#feca57",
          "#1dd1a1",
          "#00d2d3",
        ];

        function showWish(text) {
          if (!text || !text.trim()) return;

          // å‘å°„çƒŸèŠ±
          launch();
          launch();
          launch();

          var color = wishColors[Math.floor(Math.random() * wishColors.length)];
          var rotation = (Math.random() - 0.5) * 30;
          var size = 28 + Math.random() * 16;

          // åˆ›å»ºä¸€ä¸ªä¸´æ—¶å…ƒç´ æ¥æµ‹é‡æ–‡å­—å®½åº¦
          var tempWish = $('<div class="floating-wish">')
            .text(text)
            .css({
              fontSize: size + "px",
              transform: "rotate(" + rotation + "deg)",
              position: "absolute",
              visibility: "hidden",
            });
          $("body").append(tempWish);

          // è·å–æ–‡å­—çš„å®é™…å®½åº¦å’Œé«˜åº¦
          var wishWidth = tempWish.outerWidth();
          var wishHeight = tempWish.outerHeight();
          tempWish.remove();

          // è®¡ç®—å®‰å…¨çš„xå’Œyä½ç½®ï¼Œç¡®ä¿æ–‡å­—ä¸ä¼šè¶…å‡ºå±å¹•
          var maxX = 100 - (wishWidth / W) * 100 - 2; // å‡å»2%çš„è¾¹è·
          var maxY = 100 - (wishHeight / H) * 100 - 2; // å‡å»2%çš„è¾¹è·
          var x = Math.max(2, Math.min(20 + Math.random() * 60, maxX)); // ç¡®ä¿åœ¨å®‰å…¨èŒƒå›´å†…
          var y = Math.max(2, Math.min(20 + Math.random() * 40, maxY)); // ç¡®ä¿åœ¨å®‰å…¨èŒƒå›´å†…

          var $wish = $('<div class="floating-wish">')
            .text(text)
            .css({
              left: x + "%",
              top: y + "%",
              color: color,
              fontSize: size + "px",
              transform: "rotate(" + rotation + "deg)",
              textShadow: "0 0 20px " + color + ", 0 0 40px " + color,
            });

          $("body").append($wish);

          // é¢œè‰²åŠ¨æ€å˜åŒ–
          var hue = Math.random() * 360;
          var colorTimer = setInterval(function () {
            hue = (hue + 8) % 360;
            var c = "hsl(" + hue + ",100%,60%)";
            $wish.css({
              color: c,
              textShadow: "0 0 20px " + c + ", 0 0 40px " + c,
            });
          }, 80);

          setTimeout(function () {
            clearInterval(colorTimer);
            $wish.remove();
          }, 4000);
        }

        // å‘é€ç¥ç¦
        $("#send-btn").click(function () {
          var text = $("#wish-input").val().trim();
          if (text) {
            showWish(text);
            $("#wish-input").val("");
          }
        });

        $("#wish-input").keypress(function (e) {
          if (e.which === 13) {
            $("#send-btn").click();
          }
        });

        // å¿«æ·æŒ‰é’®
        $(".quick-btn").click(function () {
          showWish($(this).text());
        });

        // åˆå§‹ç¥ç¦
        var initWishes = ["ğŸ‰ 2026", "æ–°å¹´å¿«ä¹", "ğŸ é©¬å¹´å¤§å‰", "ä¸‡äº‹å¦‚æ„"];
        var idx = 0;
        function showInitWish() {
          if (idx < initWishes.length) {
            showWish(initWishes[idx]);
            idx++;
            setTimeout(showInitWish, 2500);
          }
        }
        setTimeout(showInitWish, 1500);

        // éšæœºç¥ç¦
        var randomWishes = [
          "ğŸŠ Happy 2026",
          "âœ¨ å¹¸ç¦å®‰åº·",
          "ğŸŒˆ å‰ç¨‹ä¼¼é”¦",
          "ğŸ å¥½è¿è¿è¿",
          "ğŸ’« é©¬å¹´è¡Œå¤§è¿",
          "ğŸ§¨ çˆ†ç«¹å£°å£°",
          "ğŸ® é˜–å®¶æ¬¢ä¹",
        ];
        setInterval(function () {
          if (Math.random() > 0.4) {
            showWish(
              randomWishes[Math.floor(Math.random() * randomWishes.length)]
            );
          }
        }, 4000);

        console.log("ğŸ† 2026æ–°å¹´çƒŸèŠ±å·²å¯åŠ¨ï¼çƒŸèŠ±ä¼šä¸€ç›´æ”¾ï¼");
      });
    </script>
  </body>
</html>
